<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ site_name }} Downloader - Download {{ site_name }} Video Without Watermark</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f5f5f5;
      color: #1a1a1a;
      line-height: 1.5;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    a { color: #ee1d52; text-decoration: none; }
    a:hover { text-decoration: underline; }

    /* Header */
    .header {
      width: 100%;
      max-width: 720px;
      padding: 1rem 1.25rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 0.75rem;
    }
    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      color: #1a1a1a;
    }
    .logo span { color: #ee1d52; }
    .header-nav {
      display: flex;
      gap: 1rem;
      font-size: 0.9rem;
      font-weight: 500;
    }
    .header-nav a { color: #333; }
    .header-nav a:hover { color: #ee1d52; }

    /* Main card */
    .main-card {
      width: 100%;
      max-width: 720px;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.08);
      padding: 2rem 1.75rem;
      margin: 0 1rem 1.5rem;
    }
    .main-card h1 {
      margin: 0 0 1.25rem 0;
      font-size: 1.75rem;
      font-weight: 700;
      color: #1a1a1a;
      text-align: center;
    }
    .input-row {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }
    .input-row input {
      flex: 1;
      min-width: 0;
      padding: 0.85rem 1rem;
      font-size: 1rem;
      border: 1px solid #ddd;
      border-radius: 10px;
      background: #fafafa;
      color: #1a1a1a;
      font-family: inherit;
    }
    .input-row input:focus {
      outline: none;
      border-color: #ee1d52;
      background: #fff;
    }
    .input-row input::placeholder { color: #999; }
    .btn {
      padding: 0.85rem 1.25rem;
      font-size: 0.95rem;
      font-weight: 600;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-family: inherit;
      white-space: nowrap;
    }
    .btn-paste, .btn-clear {
      background: #f0f0f0;
      color: #333;
    }
    .btn-paste:hover, .btn-clear:hover {
      background: #e5e5e5;
    }
    .btn-download {
      background: #ee1d52;
      color: #fff;
    }
    .btn-download:hover:not(:disabled) {
      background: #d01848;
    }
    .btn-download:disabled {
      opacity: 0.8;
      cursor: not-allowed;
    }
    #result {
      margin-top: 1rem;
      padding: 1rem;
      border-radius: 10px;
      font-size: 0.9rem;
      display: none;
    }
    #result.success {
      display: block;
      background: #e8f5e9;
      border: 1px solid #4caf50;
      color: #2e7d32;
    }
    #result.error {
      display: block;
      background: #ffebee;
      border: 1px solid #f44336;
      color: #c62828;
    }
    #result a { color: #ee1d52; word-break: break-all; }

    /* Feature cards */
    .features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin: 2rem 0;
      max-width: 720px;
      padding: 0 1rem;
    }
    .feature {
      background: #fff;
      border-radius: 12px;
      padding: 1.25rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      text-align: center;
    }
    .feature strong {
      display: block;
      font-size: 1.1rem;
      color: #1a1a1a;
      margin-bottom: 0.35rem;
    }
    .feature span { font-size: 0.9rem; color: #555; }

    /* Content section */
    .content-section {
      max-width: 720px;
      padding: 0 1rem 2rem;
      margin: 0 auto;
    }
    .content-section h2 {
      font-size: 1.35rem;
      margin: 0 0 0.75rem 0;
      color: #1a1a1a;
    }
    .content-section p, .content-section ol {
      color: #444;
      margin: 0 0 1rem 0;
      font-size: 0.95rem;
    }
    .content-section ol { padding-left: 1.25rem; }
    .content-section li { margin-bottom: 0.5rem; }

    /* Footer */
    .footer {
      max-width: 720px;
      width: 100%;
      padding: 1.5rem 1rem;
      margin-top: auto;
      border-top: 1px solid #eee;
      text-align: center;
      font-size: 0.85rem;
      color: #666;
    }
    .footer-links { margin-bottom: 0.75rem; }
    .footer-links a { margin: 0 0.5rem; color: #666; }
    .footer-links a:hover { color: #ee1d52; }
    .footer-disclaimer { font-size: 0.8rem; color: #888; margin-top: 0.5rem; }

    .site-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      justify-content: center;
      margin: 1rem 0 1.25rem 0;
    }
    .site-buttons a {
      display: inline-block;
      padding: 0.5rem 0.85rem;
      font-size: 0.9rem;
      font-weight: 500;
      color: #333;
      background: #f0f0f0;
      border: 1px solid #ddd;
      border-radius: 10px;
      text-decoration: none;
      transition: background 0.2s, border-color 0.2s, color 0.2s;
    }
    .site-buttons a:hover {
      background: #ee1d52;
      color: #fff;
      border-color: #ee1d52;
    }
    .site-buttons a.current {
      background: #ee1d52;
      color: #fff;
      border-color: #ee1d52;
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="logo">sss<span>Tik</span></div>
    <nav class="header-nav">
      <a href="{% url 'downloader:youtube_mp3' %}">Download TikTok MP3</a>
      <a href="{% url 'downloader:all_in_one' %}">All-in-One</a>
    </nav>
  </header>

  <main class="main-card">
    <h1>TikTok Video Downloader</h1>
    <div class="site-buttons" aria-label="Choose downloader">
      <a href="{% url 'downloader:tiktok' %}" class="current">TikTok</a>
      <a href="{% url 'downloader:facebook' %}">Facebook</a>
      <a href="{% url 'downloader:instagram' %}">Instagram</a>
      <a href="{% url 'downloader:youtube' %}">YouTube</a>
      <a href="{% url 'downloader:youtube_mp3' %}">YouTube to MP3</a>
      <a href="{% url 'downloader:all_in_one' %}">All-in-One</a>
    </div>
    <form id="download-form">
      <div class="input-row">
        <input type="url" id="url" name="url" placeholder="Paste TikTok link here..." required autocomplete="off">
        <button type="button" class="btn btn-paste" id="btn-paste">Paste</button>
        <button type="button" class="btn btn-clear" id="btn-clear">Clear</button>
        <button type="submit" class="btn btn-download" id="submit-btn">Download</button>
      </div>
      <div id="result" role="status" aria-live="polite"></div>
    </form>
  </main>

  <section class="features">
    <div class="feature">
      <strong>Unlimited</strong>
      <span>Save TikTok videos as much as you need — without any limits.</span>
    </div>
    <div class="feature">
      <strong>No Watermark!</strong>
      <span>Download TikTok video in MP4 or remove the TT logo.</span>
    </div>
    <div class="feature">
      <strong>MP4 and MP3</strong>
      <span>Save files in HD quality, convert TikTok to MP4 or MP3.</span>
    </div>
  </section>

  <section class="content-section">
    <h2>Download TikTok videos online</h2>
    <p>SSSTik is a free TikTok download tool that helps you download TikTok videos without watermark online. Save TT videos with the highest quality in an MP4 file format and HD resolution.</p>
    <h3 style="font-size:1.1rem; margin:1rem 0 0.5rem 0;">How to download TikTok without watermark?</h3>
    <ol>
      <li><strong>Find a TT</strong> — Open the TikTok app and find the video you’d like to save. Play it to confirm.</li>
      <li><strong>Copy the link</strong> — Tap the Share button on the right. Select “Copy link” from the menu.</li>
      <li><strong>Save TikTok</strong> — Paste the link into the text field above. Click “Download” to get your video without watermark.</li>
    </ol>
  </section>

  <footer class="footer">
    <div class="footer-links">
      <a href="{% url 'downloader:tiktok' %}">TikTok</a>
      <a href="{% url 'downloader:facebook' %}">Facebook</a>
      <a href="{% url 'downloader:instagram' %}">Instagram</a>
      <a href="{% url 'downloader:youtube' %}">YouTube</a>
      <a href="{% url 'downloader:youtube_mp3' %}">YouTube to MP3</a>
      <a href="{% url 'downloader:all_in_one' %}">All-in-One</a>
    </div>
    <p class="footer-disclaimer">We are not affiliated with TikTok, Douyin or Bytedance.</p>
    <p>Copyright 2018–2026</p>
  </footer>

  <script>
    (function() {
      const form = document.getElementById('download-form');
      const urlInput = document.getElementById('url');
      const submitBtn = document.getElementById('submit-btn');
      const resultEl = document.getElementById('result');
      const btnPaste = document.getElementById('btn-paste');
      const btnClear = document.getElementById('btn-clear');

      const apiUrl = '{{ api_url|escapejs }}';
      const postPayload = {{ post_payload_json|safe }};

      function showResult(isSuccess, html) {
        resultEl.className = isSuccess ? 'success' : 'error';
        resultEl.innerHTML = html;
        resultEl.style.display = 'block';
      }

      function setLoading(loading) {
        submitBtn.disabled = loading;
        submitBtn.textContent = loading ? 'Please wait' : 'Download';
      }

      if (btnPaste) {
        btnPaste.addEventListener('click', function() {
          if (navigator.clipboard && navigator.clipboard.readText) {
            navigator.clipboard.readText().then(function(text) {
              urlInput.value = text;
              urlInput.focus();
            }).catch(function() { urlInput.focus(); });
          } else {
            urlInput.focus();
          }
        });
      }
      if (btnClear) {
        btnClear.addEventListener('click', function() {
          urlInput.value = '';
          resultEl.style.display = 'none';
          urlInput.focus();
        });
      }

      form.addEventListener('submit', function(e) {
        e.preventDefault();
        var url = (urlInput.value || '').trim();
        if (!url) {
          showResult(false, 'Please enter a TikTok video URL.');
          return;
        }

        setLoading(true);
        resultEl.style.display = 'none';

        var body = { url: url };
        for (var k in postPayload) if (postPayload.hasOwnProperty(k)) body[k] = postPayload[k];

        fetch(apiUrl, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(body)
        })
          .then(function(res) { return res.json().then(function(data) { return { ok: res.ok, data: data }; }); })
          .then(function(r) {
            var ok = r.ok, data = r.data;
            if (ok && data.status !== 'error') {
              var link = data.url || data.link;
              var text = data.text || data.filename || 'Download ready';
              if (link) {
                showResult(true, 'Download: <a href="' + link + '" target="_blank" rel="noopener">' + (text || link) + '</a>');
              } else {
                showResult(true, text || JSON.stringify(data));
              }
            } else {
              var err = data.error || {};
              var msg = err.text || err.context || err.code || (typeof data.error === 'string' ? data.error : 'Download failed.');
              showResult(false, msg);
            }
          })
          .catch(function(err) {
            showResult(false, 'Request failed: ' + (err.message || 'Network error'));
          })
          .finally(function() {
            setLoading(false);
          });
      });
    })();
  </script>
</body>
</html>
